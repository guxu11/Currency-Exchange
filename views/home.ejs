<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Currency Converter</title>
</head>
<body>
    <div class="container mt-5">
       
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <div class="conversion-panel">
                    <div class="panel-heading">
                        <h2 class="text-center mb-4">Currency Converter</h2>
                    </div>
                    <div class="text-center mb-4" id="currencyInfo">
                        <!-- The dynamic currency conversion info will be displayed here -->
                        Select currencies to see the conversion rate.
                    </div>
                    <div class="panel-body">
                        <form id="currencyForm">
                            <div class="mb-3">
                                <label for="amount" class="form-label">Amount:</label>
                                <input type="number" class="form-control" id="amount" value="1">
                            </div>
                            <div class="mb-3">
                                <label for="fromCurrency" class="form-label">From:</label>
                                <select class="form-select" id="fromCurrency">
                                    <!-- Options will be populated here by JavaScript -->
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="toCurrency" class="form-label">To:</label>
                                <select class="form-select" id="toCurrency">
                                    <!-- Options will be populated here by JavaScript -->
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="result" class="form-label">Result:</label>
                                <input type="text" class="form-control" id="result" readonly>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Convert</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        async function fetchCurrencies() {
            try {
                const response = await fetch('https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies.json');
                const data = await response.json();
                const fromCurrencyDropdown = document.getElementById('fromCurrency');
                const toCurrencyDropdown = document.getElementById('toCurrency');
                const currencyInfo = document.getElementById('currencyInfo');

                function updateCurrencyInfo() {
                    const fromCurrency = fromCurrencyDropdown.value;
                    const toCurrency = toCurrencyDropdown.value;
                    const fromCurrencyText = fromCurrencyDropdown.options[fromCurrencyDropdown.selectedIndex].textContent;
                    const toCurrencyText = toCurrencyDropdown.options[toCurrencyDropdown.selectedIndex].textContent;

                    currencyInfo.textContent = `1 ${fromCurrencyText} = ... ${toCurrencyText}`;
                }

                Object.keys(data).sort().forEach(currencyCode => {
                    if (data[currencyCode] && currencyCode.length === 3) {
                        const optionFrom = document.createElement('option');
                        const optionTo = document.createElement('option');
                        optionFrom.value = currencyCode;
                        optionTo.value = currencyCode;
                        optionFrom.textContent = `${data[currencyCode]} (${currencyCode.toUpperCase()})`;
                        optionTo.textContent = `${data[currencyCode]} (${currencyCode.toUpperCase()})`;

                        // Set default values for USD and EUR
                        if (currencyCode.toLowerCase() === 'usd') {
                            optionFrom.selected = true;
                        }
                        if (currencyCode.toLowerCase() === 'eur') {
                            optionTo.selected = true;
                        }

                        fromCurrencyDropdown.appendChild(optionFrom);
                        toCurrencyDropdown.appendChild(optionTo);
                    }
                });

                fromCurrencyDropdown.addEventListener('change', updateCurrencyInfo);
                toCurrencyDropdown.addEventListener('change', updateCurrencyInfo);

                // Initialize the currency info text
                updateCurrencyInfo();

            } catch (error) {
                console.error('Error fetching the currencies:', error);
            }
        }
        
        fetchCurrencies();
    </script>
</body>
</html>
